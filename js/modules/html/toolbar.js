define(["jquery","jqueryui","jqueryuictxm","modules/util/aboutText"],function(e,t,n,i){var o=function(t){return[{title:"New...",cmd:"newCmd",action:function(e,n){t.getCaller().isNewAction=!0,t.getCaller().clearAndHideEdit(),t.getFilesList()}},{title:"----"},{title:"Open...",cmd:"openCmd",action:function(n,i){t.getCaller().isNewAction=!1,t.getCaller().clearAndHideEdit(),e("#openFlowDialogId").dialog("open")},disabled:!0},{title:"----"},{title:"Undo",cmd:"undoCmd",action:function(e,n){t.getUndoManager().undo()},disabled:!0},{title:"Redo",cmd:"redoCmd",action:function(e,n){t.getUndoManager().redo()},disabled:!0},{title:"----"},{title:"Remove selections",cmd:"removeSelected",action:function(e,n){t.getFlowController().removeSelections(),t.getSelectionManager().clearSelections(),t.refreshDiagram()},disabled:!0},{title:"----"},{title:"Save",cmd:"saveCmd",action:function(e,n){t.getCaller().clearAndHideEdit(),t.saveFlowData()},disabled:!0},{title:"Save As...",cmd:"saveAsCmd",action:function(n,i){t.getCaller().clearAndHideEdit(),e("#saveAsDialogId").dialog("open")},disabled:!1},{title:"----"},{title:"Settings...",cmd:"settingsCmd",action:function(n,i){t.getCaller().clearAndHideEdit(),e("#settingsDialogId").dialog("open")},disabled:!1},{title:"----"},{title:"Help",children:l(t)}]},l=function(e){return[{title:"Overview",action:function(t,n){e.getCaller().clearAndHideEdit(),window.open("./js/help/manual.htm")}},{title:"----"},{title:"About",action:function(t,n){e.getCaller().clearAndHideEdit();var o=i.getTitle(),l=i.getVersion(),d=i.getText(),a=i.getOpenSources(),c=i.getCopyright();e.getCaller().showAboutBox(o,l,d,a,c)}}]};return{getContextMenu:function(t){var n=e("#menuId");return{trigger:"left",menu:o(t),uiMenuOptions:{classes:{"ui-menu":"ui-menu ctx-menu"}},position:function(e,t){return{my:"left top",at:"left bottom+4",of:t.target}},beforeOpen:function(e,i){var o=t.getCaller().isConnectionOK();n.contextmenu("enableEntry","openCmd",o),n.contextmenu("enableEntry","undoCmd",t.canUndo()),n.contextmenu("enableEntry","redoCmd",t.canRedo()),n.contextmenu("enableEntry","removeSelected",t.getSelectionManager().hasSelections()),n.contextmenu("enableEntry","saveCmd",o&&t.isDirty()),n.contextmenu("enableEntry","saveAsCmd",o&&!t.getModelHandler().isDiagramEmpty())}}},getHelpMenu:function(e){return{menu:l(e),uiMenuOptions:{classes:{"ui-menu":"ui-menu ctx-menu"}},position:function(e,t){return{my:"left top",at:"left bottom+4",of:t.target}}}},initButtons:function(t){e("#menuId").click(function(){t.clearAndHideEdit()}),e("#newId").click(function(){t.isNewAction=!0,t.getFlowManager().getFilesList(),t.clearAndHideEdit()}),e("#openId").click(function(){t.isNewAction=!1,t.clearAndHideEdit(),e("#openFlowDialogId").dialog("open")}),e("#deleteId").click(function(){t.clearAndHideEdit(),t.getFlowManager().getFlowController().removeSelections(),t.getFlowManager().getSelectionManager().clearSelections(),t.getFlowManager().refreshDiagram()}).attr("disabled",!0),e("#undoId").click(function(){t.clearAndHideEdit(),t.getFlowManager().getUndoManager().undo()}).attr("disabled",!0),e("#redoId").click(function(){t.clearAndHideEdit(),t.getFlowManager().getUndoManager().redo()}).attr("disabled",!0),e("#saveId").click(function(){t.clearAndHideEdit(),t.getFlowManager().saveFlowData()}).attr("disabled",!0),e("#saveAsId").click(function(){t.clearAndHideEdit(),e("#saveAsDialogId").dialog("open")}).attr("disabled",!1),e("#configId").click(function(){t.clearAndHideEdit(),e("#settingsDialogId").dialog("open")}),e("#helpId").click(function(e){t.clearAndHideEdit()}),e("#refreshId").click(function(){t.clearAndHideEdit(),t.getFlowManager().refreshDiagramFromToolbar()}).attr("disabled",!0),e("#clearId").click(function(){t.clearAndHideEdit(),t.getFlowManager().clearDiagram()}).attr("disabled",!0),e("#leftId").click(function(){t.clearAndHideEdit(),t.getFlowManager().getPreviousDiagram()}).attr("disabled",!0),e("#rightId").click(function(){t.clearAndHideEdit(),t.getFlowManager().getNextDiagram()}).attr("disabled",!0),e("#btnFlowHId").dblclick(function(){t.btnFlowH2click()}),e("#btnFlowVId").dblclick(function(){t.btnFlowV2click()}),e("#btnHintsShowId").click(function(){t.btnHintsShowClick()}),e("#btnHintsHideId").click(function(){t.btnHintsHideClick()}),e("#inputPrevId").click(function(){t.moveDecisionInputPrev()}),e("#inputNextId").click(function(){t.moveDecisionInputNext()}),e("#endsPrevId").click(function(){t.moveDecisionEndsPrev()}),e("#endsNextId").click(function(){t.moveDecisionEndsNext()})}}});