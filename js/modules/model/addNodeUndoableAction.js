define("modules/model/addNodeUndoableAction",["modules/common/map"],function(e){function n(n,o,t){var i=this,d=n,s=o,m=t,f=new e;i.getName=function(){return"["+s.name+"]"},i.execute=function(){d.clearSegmentShiftsToLinks(f.keys()),d.addNodeToModel(s)},i.undo=function(){d.restoreSegmentShiftsToLinks(f),d.removeNodeFromModel(s)},i.redo=function(){d.clearSegmentShiftsToLinks(f.keys()),d.addNodeToModel(s)},function(){if(m)for(var e=d.getLinksCrossingCell(m),n=0;n<e.length;n++)e[n].hasSegmentShifts()&&f.put(e[n].getName(),e[n].getSegmentShifts())}()}return n});