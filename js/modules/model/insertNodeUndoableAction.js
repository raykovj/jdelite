define("modules/model/insertNodeUndoableAction",["modules/common/map"],function(e){function o(o,n,t,r,d){var i=this,s=o,m=n,f=t,a=r,u=d,c=new e;i.getName=function(){return"["+m.name+"]"},i.execute=function(){s.addCorridors(f,a,!0),s.clearSegmentShiftsToLinks(c.keys(),!0),s.addNodeToModel(m)},i.undo=function(){s.removeNodeFromModel(m),s.removeEmptyCorridors(f,a,!1),s.restoreSegmentShiftsToLinks(c,!0)},i.redo=function(){s.addCorridors(f,a,!0),s.clearSegmentShiftsToLinks(c.keys(),!0),s.addNodeToModel(m)},function(){if(u)for(var e=s.getLinksCrossingCell(u),o=0;o<e.length;o++)e[o].hasSegmentShifts()&&c.put(e[o].getName(),e[o].getSegmentShifts())}()}return o});