define("modules/model/moveNodeToPipeUndoableAction",["modules/common/map"],function(e){function o(o,t,n,i,m,s,r,d){var g=this,f=o,u=n.getNodeObject(),a=t.getNodeObject().levelNum,c=t.getNodeObject().laneNum,l=i,S=m,N=s,h=r,p=d,v=new e;g.getName=function(){return"["+u.name+"]"},g.execute=function(){f.clearSegmentShiftsToLinks(v.keys()),f.addCorridors(N,h,!0),f.moveNodeToPipe(u,l,S)},g.undo=function(){f.restoreSegmentShiftsToLinks(v),f.moveNodeToPipe(u,-1,-1),f.removeEmptyCorridors(N,h,!1),f.moveNodeToPipe(u,a,c)},g.redo=function(){f.clearSegmentShiftsToLinks(v.keys()),f.addCorridors(N,h,!0),f.moveNodeToPipe(u,l,S)},function(){for(var e=n.getAllLinks(),o=0;o<e.length;o++)e[o].hasSegmentShifts()&&v.put(e[o].getName(),e[o].getSegmentShifts());if(p)for(e=f.getLinksCrossingCell(p),o=0;o<e.length;o++)e[o].hasSegmentShifts()&&v.put(e[o].getName(),e[o].getSegmentShifts())}()}return o});