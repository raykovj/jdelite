define("modules/graph/graphMarkupPort",["modules/geometry/rectangle","modules/graph/graphPort","modules/graph/graphNode","modules/graph/connector","modules/draw/draw","modules/graph/graphConstants","modules/graph/modelUtils","modules/settings/config","modules/html/iconLoader","modules/core/jsUtils"],function(o,t,e,n,i,r,c,d,a,h){function l(e){function n(){return new o(s.connector.globalX()-Math.floor(s.width/2)-w,s.connector.globalY()-Math.floor(s.height/2)-w,s.width+2*w,s.height+2*w)}function h(){return d.hasShowTooltip()?s.getPath():s.getDirection()===r.portDirection().MARK_OUT?"Drag to create new output connection":s.getDirection()===r.portDirection().MARK_IN?"Drag to create new input connection":void 0}function l(o){return(s.getSide()&o)>0}t.call(this,e);var s=this,g=r.colors().EDGE,u=r.colors().ACCEPT_PORT,w=1,p="";s.getType=function(){return r.portType().MARKUP},s.init=function(){s.setRectSize(r.portDefSize().WIDTH,r.portDefSize().HEIGHT),s.setRectLocation(s.connector.globalX()-Math.floor(s.width/2),s.connector.globalY()-Math.floor(s.height/2)),s.setVisible(!1)},s.getAttachmentPoint=function(){return c.getEdgeConnectionPoint(s)},s.containsPoint=function(o){var t=s.isVisible()&&n().containsXY(o.x,o.y);return p=t?h():void 0,t},s.hasPoint=function(o){var t=n().containsXY(o.x,o.y);return p=t?h():void 0,t},s.getTooltip=function(){return p},s.getIcon=function(){var o,t=s.getDirection();return d.getFlowDirection()===r.flow().HORIZONTAL?l(r.nodeSide().FRONT)?o=t===r.portDirection().MARK_OUT?a.eastNewIcon:a.westNewIcon:l(r.nodeSide().BACK)?o=t===r.portDirection().MARK_OUT?a.westNewIcon:a.eastNewIcon:l(r.nodeSide().LEFT)?o=t===r.portDirection().MARK_OUT?a.northNewIcon:a.southNewIcon:l(r.nodeSide().RIGHT)&&(o=t===r.portDirection().MARK_OUT?a.southNewIcon:a.northNewIcon):l(r.nodeSide().FRONT)?o=t===r.portDirection().MARK_OUT?a.southNewIcon:a.northNewIcon:l(r.nodeSide().BACK)?o=t===r.portDirection().MARK_OUT?a.northNewIcon:a.southNewIcon:l(r.nodeSide().LEFT)?o=t===r.portDirection().MARK_OUT?a.eastNewIcon:a.westNewIcon:l(r.nodeSide().RIGHT)&&(o=t===r.portDirection().MARK_OUT?a.westNewIcon:a.eastNewIcon),s.setRectSize(o.width,o.height),o},s.drawPort=function(o){if(s.isVisible()){(s.isHighlighted()||s.dndMode===r.dndMode().ORIGIN||s.dndMode===r.dndMode().DESTINATION)&&I(o);var t=s.connector.globalX()-Math.floor(s.width/2),e=s.connector.globalY()-Math.floor(s.height/2);o.drawImage(s.getIcon(),t,e)}};var I=function(o){o.strokeStyle=g,o.fillStyle=s.dragMode===r.dragMode().ACCEPT_PORT?u:g;var t=n(),e=t.x,c=t.y,d=t.width,a=t.height;i.roundRect(o,e,c,d,a,4)};s.init()}return h.inherit(l,t),l});