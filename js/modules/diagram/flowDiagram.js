define("modules/diagram/flowDiagram",["modules/graph/graphNode","modules/diagram/flowNode","modules/diagram/flowLink","modules/layout/flowLayout","modules/graph/graphElement","modules/diagram/flowContainer","modules/geometry/rectangle","modules/diagram/diagramUtils","modules/graph/graphConstants","modules/draw/draw","modules/settings/config","modules/core/jsUtils"],function(e,o,t,i,l,n,a,s,g,h,d,c){function u(e){function o(e,o){h.drawTooltip(m,e,o)}function t(e){d.hasSideSwimLanes()&&(i(e,f.getLeftSwimLane(),g.colors().SIDE_LANES_COLOR),i(e,f.getRightSwimLane(),g.colors().SIDE_LANES_COLOR)),d.hasStartEndLevels()&&(i(e,f.getStartLane(),g.colors().START_END_COLOR),i(e,f.getEndLane(),g.colors().START_END_COLOR))}function i(e,o,t){o&&(e.fillStyle=t,e.fillRect(o.x,o.y,o.width,o.height))}function n(e){e.strokeStyle=g.colors().GRID,e.setLineDash([3,2]);for(var o=f.getLevelPipes(),t=0;t<o.length;t++){var i=o[t].clone();i.translate(1,1),d.getFlowDirection()===g.flow().VERTICAL?(e.beginPath(),e.moveTo(i.x,i.y),e.lineTo(i.x+i.width,i.y),e.moveTo(i.x,i.y+i.height),e.lineTo(i.x+i.width,i.y+i.height),e.stroke()):(e.beginPath(),e.moveTo(i.x,i.y),e.lineTo(i.x,i.y+i.height),e.moveTo(i.x+i.width,i.y),e.lineTo(i.x+i.width,i.y+i.height),e.stroke())}var l=f.getLanePipes();for(t=0;t<l.length;t++)i=l[t].clone(),i.translate(1,1),d.getFlowDirection()===g.flow().VERTICAL?(e.beginPath(),e.moveTo(i.x,i.y),e.lineTo(i.x,i.y+i.height),e.moveTo(i.x+i.width,i.y),e.lineTo(i.x+i.width,i.y+i.height),e.stroke()):(e.beginPath(),e.moveTo(i.x,i.y),e.lineTo(i.x+i.width,i.y),e.moveTo(i.x,i.y+i.height),e.lineTo(i.x+i.width,i.y+i.height),e.stroke())}function s(e){e.strokeStyle=g.colors().BORDER,e.setLineDash([0,0]),r=u.getRectBounds().clone(),r.translate(1,1),e.strokeRect(r.x,r.y,r.width,r.height)}l.call(this,new a(0,0,0,0));var c,u=this,w=e,f=e.getFlowLayout(),L=w.getModelHandler(),m=e.getCanvas();u.getFlowLayout=function(){return f},u.setMousePoint=function(e){c=e},u.getMousePoint=function(){return c},u.adjustGraphics=function(e){u.setRectSize(e.width,e.height)},u.performLayout=function(){document.getElementById("topContainerId").style.cursor="wait",f.doLayout(),u.adjustGraphics(f.getLayoutSize()),document.getElementById("topContainerId").style.cursor="default"},u.getFlowNodes=function(){return L.getFlowNodes()},u.getFlowLinks=function(){return L.getFlowLinks()},u.clear=function(){},u.clearCanvas=function(){m.getContext("2d").clearRect(0,0,m.width,m.height)},u.clearMarkups=function(){for(var e=w.getModelHandler().getFlowNodes(),o=0;o<e.length;o++)e[o].showMarkupPorts(!1),e[o].hideRefPorts()},u.paintDiagram=function(){var e=m.getContext("2d");e.clearRect(0,0,m.width,m.height),t(e);w.getDnDHandler().drawAcceptingLocations();d.hasShowGrid()&&n(e),s(e);for(var o=w.getModelHandler().getFlowNodes(),i=0;i<o.length;i++)o[i].drawGraphics(e);var l=w.getModelHandler().getFlowLinks();for(i=0;i<l.length;i++)l[i].isSelected()||l[i].isHighlighted()||l[i].drawGraphics(e),!l[i].isSelected()&&l[i].isHighlighted()&&l[i].drawGraphics(e),l[i].isSelected()&&l[i].drawGraphics(e);e.setLineDash([0,0])},u.showTooltip=function(e){var t,i,l,n=w.getModelHandler().getFlowNodes();for(l=0;l<n.length&&!(n[l].isVisible()&&(t=n[l].getTooltip(),i=n[l].getNameTooltip(),t||i&&!d.hasShowTooltip()));l++);if(!t){var r=w.getModelHandler().getFlowLinks();for(l=0;l<r.length&&(!r[l].isVisible()||!(t=r[l].getTooltip()));l++);}t?(d.hasShowTooltip()&&o(e,t),w.getCaller().showTooltipBox(!d.hasShowTooltip()),w.getCaller().setTooltipBox(t,e)):i?o(e,i):w.getCaller().setTooltipBox("")},u.printDiagramContent=function(e){console.log("---- diagram: "+e+" ----");var o,t=(f.getNodesList(),f.getLevels());for(console.log("LEVELS:"),o=0;o<t.length;o++)console.log(t[o].showBounds());var i=f.getLevelPipes();for(console.log("LEVEL PIPES:"),o=0;o<i.length;o++)console.log(i[o].showBounds());var l=f.getLanes();for(console.log("LANES:"),o=0;o<l.length;o++)console.log(l[o].showBounds());var n=f.getLanePipes();for(console.log("LANE PIPES:"),o=0;o<n.length;o++)console.log(n[o].showBounds())}}return c.inherit(u,l),u});